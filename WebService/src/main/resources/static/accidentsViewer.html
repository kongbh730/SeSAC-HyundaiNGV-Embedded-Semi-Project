<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>Accident Viewer</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            background-color: #f4f4f5;
        }
        header {
            background-color: #ffffff;
            border-bottom: 1px solid #ddd;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h1 {
            font-size: 20px;
            margin: 0;
        }
        .tabs {
            display: flex;
            gap: 8px;
            padding: 16px 24px;
        }
        .tab-button {
            padding: 8px 16px;
            background-color: #e4e4e7;
            border-radius: 4px;
            text-decoration: none;
            color: black;
            font-weight: bold;
        }
        .tab-button.active {
            background-color: #6366f1;
            color: white;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            margin: 24px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #eee;
        }
    </style>
</head>
<body>

<header>
    <h1>üöß Accident Viewer</h1>
</header>

<div class="tabs">
    <a href="vehicleViewer.html" class="tab-button">Vehicles</a>
    <a href="accidentsViewer.html" class="tab-button active">Accidents</a>
</div>

<table id="accident-table" style="margin: 0 24px;">
    <thead>
    <tr>
        <th>ID</th>
        <th>Ï∞®Îüâ</th>
        <th>Ïö¥Ï†ÑÏûê</th>
        <th>ÏúÑÏπò</th>
        <th>ÎÇ†Ïßú</th>
        <th>ÏÉÅÌÉú</th>
    </tr>
    </thead>
    <tbody></tbody>
</table>

<script>
    const vehicleMap = {};

    fetch('/api/vehicles')
        .then(res => res.json())
        .then(vehicles => {
            vehicles.forEach(v => vehicleMap[v.id] = v);
            return fetch('/api/accidents');
        })
        .then(res => res.json())
        .then(accidents => {
            const tbody = document.querySelector('#accident-table tbody');
            accidents.forEach(a => {
                const v = vehicleMap[a.vehicleId] || {};
                const row = document.createElement('tr');
                row.innerHTML = `
          <td>${a.id}</td>
          <td>${v.name || a.vehicleId}</td>
          <td>${v.driver || '-'}</td>
          <td>${a.location}</td>
          <td>${a.datetime || a.date || '-'}</td>
          <td>${a.status || 'Reported'}</td>
        `;
                tbody.appendChild(row);
            });
        });
</script>

</body>
</html>
